

pool = parpool('Threads');

tic
for idx = 1:10
    f(idx) = parfeval(pool, @magic, 1, idx);
end

magicResults = cell(1,10);
for idx = 1:10
    [completedIdx, value] = fetchNext(f);
    magicResults{completedIdx} = value;
    fprintf('Got the Results with Index: %d.\n', completedIdx);
end
toc
